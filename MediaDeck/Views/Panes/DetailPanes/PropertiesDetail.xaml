<?xml version="1.0" encoding="utf-8"?>
<local:DetailPaneBase
	x:Class="MediaDeck.Views.Panes.DetailPanes.PropertiesDetail"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="using:MediaDeck.Views.Panes.DetailPanes"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d">

	<StackPanel Spacing="12">
		<!-- Rating Section -->
		<StackPanel Spacing="4">
			<TextBlock Text="Rating" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
			<RatingControl
				Value="{x:Bind ViewModel.Rate.Value, Mode=TwoWay}"
				IsClearEnabled="True"
				Caption="{x:Bind ViewModel.Rate.Value, Mode=OneWay}"/>
		</StackPanel>

		<!-- Properties Section -->
		<StackPanel Spacing="8">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="120"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<TextBlock Grid.Column="0" Text="Usage Count" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center"/>
				<TextBlock Grid.Column="1" Text="{x:Bind ViewModel.UsageCount.Value, Mode=OneWay}" VerticalAlignment="Center"/>
			</Grid>
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="120"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<TextBlock Grid.Column="0" Text="File Path" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Top"/>
				<TextBlock Grid.Column="1" Text="{x:Bind ViewModel.RepresentativeFile.Value.FileModel.FilePath, Mode=OneWay}" IsTextSelectionEnabled="True" TextWrapping="Wrap"/>
			</Grid>
		</StackPanel>

		<!-- Dynamic Properties -->
		<ItemsView ItemsSource="{x:Bind ViewModel.Properties.Value, Mode=OneWay}">
			<ItemsView.ItemTemplate>
				<DataTemplate>
					<ItemContainer Margin="0,2">
						<Grid>
							<Grid Visibility="{Binding HasMultipleValues, Converter={StaticResource InvertBoolToVisibilityConverter}}">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="120"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<TextBlock Grid.Column="0" Text="{Binding Title}" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="1" Text="{Binding RepresentativeValue.Value}" VerticalAlignment="Center" TextWrapping="Wrap"/>
							</Grid>
							<Grid Visibility="{Binding HasMultipleValues, Converter={StaticResource BoolToVisibilityConverter}}">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="120"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>
								<TextBlock Grid.Column="0" Text="{Binding Title}" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" VerticalAlignment="Center"/>
								<TextBlock Grid.Column="1" Text="(Multiple values)" Foreground="{ThemeResource TextFillColorTertiaryBrush}" FontStyle="Italic" VerticalAlignment="Center"/>
							</Grid>
						</Grid>
					</ItemContainer>
				</DataTemplate>
			</ItemsView.ItemTemplate>
		</ItemsView>

		<!-- Description Section -->
		<StackPanel Spacing="8">
			<TextBlock Text="Description" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
			<TextBox
				Text="{x:Bind ViewModel.Description.Value, Mode=TwoWay}"
				AcceptsReturn="True"
				MinHeight="80"
				TextWrapping="Wrap"
				PlaceholderText="Add a description..."/>
			<Button Content="Update" Command="{x:Bind ViewModel.UpdateDescriptionCommand}" HorizontalAlignment="Right"/>
		</StackPanel>
	</StackPanel>
</local:DetailPaneBase>
